<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moon Artifact Explorer</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="container"></div>
  
  <!-- HUD Overlay -->
  <div id="hud">
    <div id="title">
      <h1>Moon Artifact Explorer</h1>
      <p class="subtitle">Drag to orbit â€¢ Scroll to zoom â€¢ Hover for details</p>
    </div>
    
    <div id="legend">
      <h3>ARTIFACT STATUS</h3>
      <div class="legend-item"><span class="dot impactor"></span> Impactor</div>
      <div class="legend-item"><span class="dot crashed"></span> Crashed</div>
      <div class="legend-item"><span class="dot landed"></span> Landed</div>
      <div class="legend-item"><span class="dot orbiting"></span> Orbiting</div>
      
      <h3>VIEW TOGGLES</h3>
      <label><input type="checkbox" id="toggleGrid" checked> Grid (G)</label>
      <label><input type="checkbox" id="toggleLabels" checked> Labels (L)</label>
      <label><input type="checkbox" id="toggleTerrain" checked> Terrain (T)</label>
      <label><input type="checkbox" id="togglePoles" checked> Poles (P)</label>
      <label><input type="checkbox" id="toggleArtifacts" checked> Artifacts (M)</label>
      
      <h3>TERRAIN MODE (V)</h3>
      <div id="terrainMode">Hybrid</div>
      
      <h3>FEATURES</h3>
      <label style="color: #ff8844;"><input type="checkbox" id="toggleCraters"> Craters (C)</label>
      <label style="color: #4488ff;"><input type="checkbox" id="toggleMaria"> Maria (B)</label>

      <h3>RESOURCES</h3>
      <label class="resource water"><input type="checkbox" id="toggleWater"> Water Ice (W)</label>
      <label class="resource helium"><input type="checkbox" id="toggleHelium"> Helium-3 (I)</label>
      <label class="resource titanium"><input type="checkbox" id="toggleTitanium"> Titanium (N)</label>
      <label class="resource kreep"><input type="checkbox" id="toggleKreep"> KREEP (K)</label>
      <label class="resource minerals"><input type="checkbox" id="toggleMinerals"> Minerals (X)</label>
      <div class="small-text">[A] Toggle All â€¢ [+/-] Opacity</div>
      
      <h3>NAVIGATION</h3>
      <div class="small-text">[R] Reset â€¢ [S] Surveyor 3 â€¢ [D] Help</div>

      <h3>ADVANCED</h3>
      <button id="openVisualSettings" class="visual-settings-btn">Visual Settings (Q)</button>
    </div>
    
    <div id="search-panel">
      <input type="text" id="searchBox" placeholder="Search artifacts... (/)">
      <div id="filters">
        <h4>FILTER BY ORIGIN</h4>
        <label><input type="checkbox" id="filterUS" checked> United States</label>
        <label><input type="checkbox" id="filterSovietUnion" checked> Soviet Union</label>
        <label><input type="checkbox" id="filterRussia" checked> Russia</label>
        <label><input type="checkbox" id="filterChina" checked> China</label>
        <label><input type="checkbox" id="filterIndia" checked> India</label>
        <label><input type="checkbox" id="filterJapan" checked> Japan</label>
        <label><input type="checkbox" id="filterIsrael" checked> Israel</label>
        <label><input type="checkbox" id="filterEurope" checked> Europe</label>
      </div>
      <div id="artifactCount">Showing 0 of 0 artifacts</div>
    </div>
  </div>
  
  <!-- Tooltip -->
  <div id="tooltip"></div>

  <!-- Mission Details Panel -->
  <div id="missionPanel" class="hidden details-panel">
    <div class="panel-header">
      <h2 id="panelTitle">Mission Name</h2>
      <button id="panelClose" class="panel-close-btn">&times;</button>
    </div>
    <div class="panel-content">
      <div class="mission-badge">
        <div id="panelOperator" class="operator-badge"></div>
        <div id="panelYear" class="year-badge"></div>
      </div>
      <div class="mission-stats">
        <div class="stat-item">
          <span class="stat-label">Type:</span>
          <span id="panelType" class="stat-value"></span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Status:</span>
          <span id="panelStatus" class="stat-value"></span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Mass:</span>
          <span id="panelMass" class="stat-value"></span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Location:</span>
          <span id="panelCoords" class="stat-value"></span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Elevation:</span>
          <span id="panelElevation" class="stat-value"></span>
        </div>
      </div>
      <div id="panelDescription" class="mission-description"></div>
      <div class="panel-actions">
        <button id="panelFocus" class="action-btn">Focus on Mission</button>
        <button id="panelTrajectory" class="action-btn">Show Trajectory</button>
        <a id="panelLearnMore" class="action-btn" href="#" target="_blank" style="display: none; text-align: center; text-decoration: none; line-height: 1.8;">Learn More</a>
      </div>
    </div>
    <div class="resize-handle"></div>
  </div>

  <!-- Feature Details Panel (for craters, maria, resources) -->
  <div id="featurePanel" class="hidden details-panel">
    <div class="panel-header">
      <h2 id="featurePanelTitle">Feature Name</h2>
      <button id="featurePanelClose" class="panel-close-btn">&times;</button>
    </div>
    <div class="panel-content">
      <div class="mission-badge">
        <div id="featurePanelType" class="operator-badge"></div>
      </div>
      <div class="mission-stats" id="featurePanelStats">
        <!-- Stats will be dynamically populated -->
      </div>
      <div id="featurePanelDescription" class="mission-description"></div>
      <div class="panel-actions">
        <button id="featurePanelFocus" class="action-btn">Focus on Feature</button>
        <a id="featurePanelLearnMore" class="action-btn" href="#" target="_blank" style="display: none; text-align: center; text-decoration: none; line-height: 1.8;">Learn More</a>
      </div>
    </div>
    <div class="resize-handle"></div>
  </div>

  <!-- Visual Settings Modal -->
  <div id="visualSettingsModal" class="hidden">
    <div class="modal-content settings-modal">
      <div class="settings-header">
        <h2>ADVANCED VISUAL SETTINGS</h2>
        <button id="closeVisualSettings" class="panel-close-btn">&times;</button>
      </div>

      <div class="settings-content">
        <div class="settings-section">
          <h3>ðŸŒŸ STARFIELD</h3>
          <label class="setting-item">
            <input type="checkbox" id="toggleStarfield" checked>
            <span>Enable Starfield</span>
          </label>
          <label class="setting-item">
            <span>Star Size</span>
            <input type="range" id="starSize" min="0.5" max="5" step="0.1" value="2.5">
            <span id="starSizeValue">2.5</span>
          </label>
          <label class="setting-item">
            <span>Star Opacity</span>
            <input type="range" id="starOpacity" min="0" max="1" step="0.05" value="1.0">
            <span id="starOpacityValue">100%</span>
          </label>
          <label class="setting-item">
            <span>Star Count</span>
            <input type="range" id="starCount" min="1000" max="20000" step="1000" value="8000">
            <span id="starCountValue">8000</span>
          </label>
        </div>

        <div class="settings-section">
          <h3>ðŸ’¡ LIGHTING</h3>
          <label class="setting-item">
            <span>Ambient Light</span>
            <input type="range" id="ambientIntensity" min="0" max="1" step="0.05" value="0.4">
            <span id="ambientIntensityValue">0.4</span>
          </label>
          <label class="setting-item">
            <span>Sun Intensity</span>
            <input type="range" id="sunIntensity" min="0" max="5" step="0.1" value="1.8">
            <span id="sunIntensityValue">1.8</span>
          </label>
          <label class="setting-item">
            <span>Fill Light</span>
            <input type="range" id="fillIntensity" min="0" max="1" step="0.05" value="0.3">
            <span id="fillIntensityValue">0.3</span>
          </label>
          <label class="setting-item">
            <span>Point Light</span>
            <input type="range" id="pointIntensity" min="0" max="2" step="0.1" value="0.5">
            <span id="pointIntensityValue">0.5</span>
          </label>
        </div>

        <div class="settings-section">
          <h3>ðŸŒ™ MOON SURFACE</h3>
          <label class="setting-item">
            <input type="checkbox" id="toggleTexture" checked>
            <span>Enable NASA Texture</span>
          </label>
          <label class="setting-item">
            <span>Surface Roughness</span>
            <input type="range" id="surfaceRoughness" min="0" max="1" step="0.05" value="0.95">
            <span id="surfaceRoughnessValue">0.95</span>
          </label>
          <label class="setting-item">
            <span>Base Color Brightness</span>
            <input type="range" id="baseBrightness" min="0" max="255" step="5" value="204">
            <span id="baseBrightnessValue">204</span>
          </label>
          <label class="setting-item">
            <span>Elevation Color Intensity</span>
            <input type="range" id="elevationIntensity" min="0" max="2" step="0.1" value="1.0">
            <span id="elevationIntensityValue">1.0</span>
          </label>
        </div>

        <div class="settings-section">
          <h3>ðŸŽ¨ RENDERER</h3>
          <label class="setting-item">
            <input type="checkbox" id="toggleToneMapping" checked>
            <span>ACES Tone Mapping</span>
          </label>
          <label class="setting-item">
            <span>Tone Exposure</span>
            <input type="range" id="toneExposure" min="0.5" max="3" step="0.1" value="1.2">
            <span id="toneExposureValue">1.2</span>
          </label>
          <label class="setting-item">
            <span>Pixel Ratio</span>
            <input type="range" id="pixelRatio" min="1" max="3" step="0.5" value="2">
            <span id="pixelRatioValue">2.0</span>
          </label>
        </div>

        <div class="settings-section">
          <h3>ðŸŽ¯ PRESETS</h3>
          <div class="preset-buttons">
            <button class="preset-btn" data-preset="realistic">Photorealistic</button>
            <button class="preset-btn" data-preset="bright">Bright View</button>
            <button class="preset-btn" data-preset="space">Deep Space</button>
            <button class="preset-btn" data-preset="default">Default</button>
          </div>
        </div>

        <div class="settings-actions">
          <button id="resetVisualSettings" class="action-btn">Reset to Defaults</button>
          <button id="applyVisualSettings" class="action-btn primary">Apply Changes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Help Modal -->
  <div id="helpModal" class="hidden">
    <div class="modal-content">
      <h2>KEYBOARD SHORTCUTS</h2>
      <div class="shortcuts-grid">
        <div class="shortcut-col">
          <h4>VIEW</h4>
          <div>G - Grid</div>
          <div>L - Labels</div>
          <div>T - Terrain</div>
          <div>P - Poles</div>
          <div>V - Terrain Mode</div>
          <div>E - Elevation Colors</div>
        </div>
        <div class="shortcut-col">
          <h4>RESOURCES</h4>
          <div>W - Water Ice</div>
          <div>I - Helium-3</div>
          <div>N - Titanium</div>
          <div>K - KREEP</div>
          <div>X - Minerals</div>
          <div>A - Toggle All</div>
        </div>
        <div class="shortcut-col">
          <h4>NAVIGATION</h4>
          <div>R - Reset View</div>
          <div>S - Surveyor 3</div>
          <div>/ - Search</div>
          <div>1-9 - Quick Focus</div>
          <div>Q - Visual Settings</div>
          <div>D - This Help</div>
        </div>
      </div>
      <p class="modal-close">Press D to close</p>
    </div>
  </div>
  
  <!-- Loading -->
  <div id="loading">
    <div class="spinner"></div>
    <p>Initializing Lunar Database...</p>
  </div>

  <!-- Three.js and modules -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
  </script>
  <script type="module" src="main.js"></script>
</body>
</html>
